<!--[if lte IE 6]><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 transitional//EN"><![endif]-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<title>Stixy: For Flexible Online Creation Collaboration and Sharing</title>
<style>
	span { background:red; width:3px; height:10px; visibility:hidden; }
</style>
	<script type="text/javascript" src="../javascripts/all/default/001_prototype_extend.js"></script>
	<script type="text/javascript">
	function CaretPosition(source){
		this.source = source;
		this.node = document.createElement("span");
		this.base = (this.source.ownerDocument||this.source).defaultView;
		this.base.addEventListener("keyup", function(){
			var sel = this.base.getSelection();
			var range = sel.getRangeAt(0);
			range.insertNode(this.node);
			//console.log(this.node.offsetTop)
			//console.log(this.node.offsetLeft)
			//this.node.parentNode.removeChild(this.node)
		}.b(this), false)
	}
	onload = function(){
		new CaretPosition(document.getElementById("frame").contentDocument.body.firstChild);
	}
 </script>
</head>

<body> 
	<iframe src="/test/wrap.html" id="frame" width="100" height="100" scrolling="no"></iframe>
</body>
</html>