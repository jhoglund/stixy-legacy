<!--[if lte IE 6]><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 transitional//EN"><![endif]-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<title>Stixy: For Flexible Online Creation Collaboration and Sharing</title>
<style>
	span { background:red; width:3px; height:10px; visibility:hidden; }
</style>
	<script type="text/javascript">
 		RemoteCanvas = function() {
		    this.url = "scroll.html";
		};

		RemoteCanvas.CANVAS_WIDTH = 300;
		RemoteCanvas.CANVAS_HEIGHT = 300;

		RemoteCanvas.prototype.load = function() {
		    var windowWidth = window.innerWidth - 25;
		    var iframe;
		    iframe = document.createElement("iframe");
		    iframe.id = "test-iframe";
		    iframe.height = "10px";
		    iframe.width = windowWidth + "px";
		    iframe.style.visibility = "hidden";
		    iframe.src = this.url;
		    // Here is where the magic happens... add a listener to the
		    // frame's onload event
		    console.log(this)
				iframe.addEventListener("load", remoteCanvas.remotePageLoaded, true);
		    //append to the end of the page
		    window.document.body.appendChild(iframe);
		    return;    
		};

		RemoteCanvas.prototype.remotePageLoaded = function() {
		    // Look back up the iframe by id
		    var ldrFrame = document.getElementById("test-iframe");
		    // Get a reference to the window object you need for the canvas
		    // drawWindow method
		    var remoteWindow = ldrFrame.contentWindow;

		    //Draw canvas
		    var canvas = document.createElement("canvas");
		    canvas.style.width = RemoteCanvas.CANVAS_WIDTH + "px";
		    canvas.style.height = RemoteCanvas.CANVAS_HEIGHT + "px";
		    canvas.width = RemoteCanvas.CANVAS_WIDTH;
		    canvas.height = RemoteCanvas.CANVAS_HEIGHT;
		    var windowWidth = window.innerWidth - 25;
		    var windowHeight = window.innerHeight;

		    var ctx = canvas.getContext("2d");
		    ctx.clearRect(0, 0,
		                  RemoteCanvas.CANVAS_WIDTH,
		                  RemoteCanvas.CANVAS_HEIGHT);
		    ctx.save();
		    ctx.scale(RemoteCanvas.CANVAS_WIDTH / windowWidth,
		              RemoteCanvas.CANVAS_HEIGHT / windowHeight);
		    ctx.drawWindow(remoteWindow,
		                   0, 0,
		                   windowWidth, windowHeight,
		                   "rgb(0,0,0)");
		    ctx.restore();
		};
		
		var remoteCanvas = new RemoteCanvas();
		
		//window.addEventListener("load", remoteCanvas.load, false);
	</script>
</head>

<body style="font-size:12px;"> 

sss
	<!-- HEADER -->
<div style="font-size:1em;border:1px solid black;margin:1px;width:50px">
	denforstaraden<br>
	denandraraden<br>
	dentredjeraden
	<div style="font-size:2em;border:1.2px solid black;margin:1px;width:100px;">
		denforstaraden<br>
		denandraraden<br>
		dentredjeraden
		<div style="font-size:2em;border:1.4px solid black;margin:1px;width:200px">
			denforstaraden<br>
			denandraraden<br>
			dentredjeraden
		</div>
	</div>
</div>

</body>
</html>